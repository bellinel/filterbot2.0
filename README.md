# FilterBot

Telegram бот с функциями фильтрации и анализа сходства сообщений на основе TF-IDF векторизации.

## Возможности

- Автоматическая проверка схожести входящих сообщений с уже имеющимися в базе данных
- Определение дубликатов и похожих сообщений на основе метрики косинусного сходства
- Сохранение уникальных сообщений в базе данных
- Автоматическая очистка базы данных через настраиваемый интервал времени

## Технологии

- Python 3.10+
- aiogram - асинхронная библиотека для Telegram Bot API
- scikit-learn - для TF-IDF векторизации и расчета косинусного сходства
- SQLAlchemy - ORM для работы с базой данных
- SQLite - база данных

## Установка и запуск

1. Клонируйте репозиторий:
```
git clone https://github.com/yourusername/filterbot.git
cd filterbot
```

2. Создайте и активируйте виртуальное окружение:
```
python -m venv venv
# Linux/Mac:
source venv/bin/activate
# Windows:
venv\Scripts\activate
```

3. Установите зависимости:
```
pip install -r requirements.txt
```

4. Создайте файл `.env` с вашим токеном бота:
```
BOT_TOKEN=your_telegram_bot_token
DB_CLEANUP_DAYS=7
```

5. Запустите бота:
```
python main.py
```

## Команды бота

- `/id` - Показать ID пользователя
- `/cleanup_info` - Получить информацию о периоде очистки базы данных
- `/set_cleanup_days [число]` - Установить количество дней между очистками базы данных

## Структура проекта

- `main.py` - Основной файл запуска бота
- `filter.py` - Модуль фильтрации и сравнения сообщений
- `database/` - Каталог с модулями для работы с базой данных
  - `engine.py` - Настройка движка базы данных и модели данных
  - `orm.py` - Объектно-реляционное отображение и репозиторий сообщений 